<html>
  <head>
    <title>Hackney Bindicator</title>
    <style>
      body {
        background-color: #0b0c0c;
        color: white;
        max-width: 500px;
      }

      a:link {
        color: #a4d65e;
      }

      a:visited, a:active {
        color: #00664f;
      }
    </style>
  </head>
  <body>
    <h1>Hackney Bindicator</h1>
    <h2>Introduction</h2>
      <p>This API tells you what bins to put out on what days for properties in the London Borough of Hackney.</p>
      <p><a href="http://www.hackney.gov.uk">Hackney Council</a> provide a <a href="http://hackney-waste-pages.azurewebsites.net">web tool</a> to access this information, but it is difficult to use programatically because it:
        <ul>
          <li>involves making multiple calls to their backend;</li>
          <li>provides verbose output closely coupled to the Council's operational database; and</li>
          <li>is poorly documented.</li>
        </ul>
      </p>
      <p>This API is a simple layer on top of the Council's API that makes all the necessary calls for you and provides a simple JSON response. It employs caching to provide a faster response than orchestrating these calls yourself.</p>
    <h2>API format</h2>
      <p>The API provides two endpoints, <code>addresses</code> and <code>property</code>.</p>
      <h3>Addresses</h3>
        <p>The <code>/addresses/{postcode}</code> endpoint provides a list of properties and their IDs within a given postcode. The returned IDs are needed as input for the <code>property</code> endpoint. It returns a 400 error for invalid postcodes or postcodes outside Hackney, or a 500 error if something else went wrong.</p>
        <p>The output format for a given postcode is:</p>
        <pre><code>
          [
            {
              "Id": "foo",
              "Name": "29 ACACIA AVENUE"
            },
            {
              "Id": "bar",
              "Name": "52 FESTIVE ROAD"
            }
          ]
        </code></pre>
      <h3>Property</h3>
      <p>The <code>/property/{property_id}</code> endpoint provides a list of bins at a given property and the next collection date for each. It returns a 400 error for an unrecognized property ID, or a 500 error if something else went wrong.</p>
      <p>The output format for a given property ID is:</p>
      <pre><code>
        {
          "PropertyId": "foo",
          "Bins": [
            {
              "Name": "Garbage can",
              "NextCollection": "2024-01-01T00:00:00Z"
            },
            {
              "Name": "Recycling sack",
              "NextCollection": "2024-01-05T00:00:00Z"
            }
          ]
        }
      </code></pre>
      <p>All collection dates are truncated to the start of the relevant day (the time part is always <code>00:00:00</code>). Bin names are passed through from the Council's API. I believe there is a finite set, but am not confident I have seen all the values yet.</p>
    <h2>Use case</h2>
      <p>I made this so that I could create a <a href="http://tidbyt.com">Tidbyt</a> app to show me what bins to put out after moving back to Hackney. Without this API layer, the app would have timed out. Using the API is faster as it can parallelise calls to the Council's API and cache responses.</p>
    <h2>Source code</h2>
      <p>Source code is available on <a href="https://github.com/dinosaursrarr/hackney-bindicator">Github</a></p>
      <p>You can <a href="mailto:tom+bindicator@chamberlaincurtis.com">email</a> me if you have any questions. I can't promise a response.</p>
    <h2>Disclaimer</h2>
      <p>I am in no way affiliated with the London Borough of Hackney Council except for being a resident. This API could break at any time if the Council update their web tool. I hope they won't because it is useful.</p>
  </body>
</html>